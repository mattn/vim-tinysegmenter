Describe tinysegmenter functions

    Describe segment method
        It should return empty list
            let ts = tinysegmenter#new()
            let items = ts.segment('')
            Assert type(items) == type([])
            Assert len(items) == 0
        End

        It should do basic segmentation
            let ts = tinysegmenter#new()
            let items = ts.segment('ç§ã®åå‰ã¯ä¸­é‡ã§ã™')
            Assert len(items) == 6
            Assert items[0] == 'ç§'
            Assert items[1] == 'ã®'
            Assert items[2] == 'åå‰'
            Assert items[3] == 'ã¯'
            Assert items[4] == 'ä¸­é‡'
            Assert items[5] == 'ã§ã™'
        End

        It should handle numbers
            let ts = tinysegmenter#new()
            let items = ts.segment('2023å¹´12æœˆ31æ—¥')
            Assert len(items) == 6
            Assert items[0] == '2023'
            Assert items[1] == 'å¹´'
            Assert items[2] == '12'
            Assert items[3] == 'æœˆ'
            Assert items[4] == '31'
            Assert items[5] == 'æ—¥'
        End

        It should handle consecutive numbers
            let ts = tinysegmenter#new()
            let items = ts.segment('123456')
            Assert len(items) == 1
            Assert items[0] == '123456'
        End

        It should handle katakana
            let ts = tinysegmenter#new()
            let items = ts.segment('ã‚¢ãƒªãƒãƒã¨40äººã®ç›—è³Š')
            Assert len(items) == 6
            Assert items[0] == 'ã‚¢ãƒªãƒãƒ'
            Assert items[1] == 'ã¨'
            Assert items[2] == '40'
            Assert items[3] == 'äºº'
            Assert items[4] == 'ã®'
            Assert items[5] == 'ç›—è³Š'
        End

        It should preserve words in preserve_list
            let ts = tinysegmenter#new()
            let ts.preserve_list = ['ä¸‡åš']
            let items = ts.segment('2025å¹´å¤§é˜ªä¸‡åš')
            Assert len(items) == 4
            Assert items[0] == '2025'
            Assert items[1] == 'å¹´'
            Assert items[2] == 'å¤§é˜ª'
            Assert items[3] == 'ä¸‡åš'
        End

        It should preserve tokens
            let ts = tinysegmenter#new()
            let ts.preserve_tokens = 1
            let items = ts.segment('URLã¯https://example.comã§ã™')
            Assert len(items) == 4
            Assert items[0] == 'URL'
            Assert items[1] == 'ã¯'
            Assert items[2] == 'https://example.com'
            Assert items[3] == 'ã§ã™'
        End

        It should handle emoji
            let ts = tinysegmenter#new()
            let items = ts.segment('ã“ã¨ã—ã¯ğŸ¤”2024å¹´')
            Assert len(items) == 5
            Assert items[0] == 'ã“ã¨ã—'
            Assert items[1] == 'ã¯'
            Assert items[2] == 'ğŸ¤”'
            Assert items[3] == '2024'
            Assert items[4] == 'å¹´'
        End

        It should support multiple instances
            let ts1 = tinysegmenter#new()
            let ts1.preserve_list = ['æ±äº¬éƒ½']
            let items1 = ts1.segment('æ±äº¬éƒ½ã«è¡Œãã¾ã™')
            let ts2 = tinysegmenter#new()
            let ts2.preserve_list = ['å¤§é˜ªåºœ']
            let items2 = ts2.segment('å¤§é˜ªåºœã«è¡Œãã¾ã™')
            Assert len(items1) == 4
            Assert items1[0] == 'æ±äº¬éƒ½'
            Assert len(items2) == 4
            Assert items2[0] == 'å¤§é˜ªåºœ'
        End
    End

    Describe tinysegmenter#segment function
        It should segment with preserve_list
            let items = tinysegmenter#segment('2025å¹´å¤§é˜ªä¸‡åš', ['ä¸‡åš'], 0)
            Assert len(items) == 4
            Assert items[3] == 'ä¸‡åš'
        End

        It should segment with preserve_tokens
            let items = tinysegmenter#segment('URLã¯https://example.comã§ã™', 1)
            Assert len(items) == 4
            Assert items[2] == 'https://example.com'
        End

        It should segment with both preserve_list and preserve_tokens
            let items = tinysegmenter#segment('URLã¯https://example.comã§ã™', 1, ['URL'])
            Assert len(items) == 4
            Assert items[0] == 'URL'
            Assert items[2] == 'https://example.com'
        End
    End

End
